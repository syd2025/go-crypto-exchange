services:
  etcd:
    container_name: etcd
    image: quay.io/coreos/etcd:v3.5.15
    environment:
      - ETCD_NAME=etcd
      - ETCD_DATA_DIR=/var/etcd
      - ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379
      - ETCD_ADVERTISE_CLIENT_URLS=http://0.0.0.0:2379
      - ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380
      - ETCD_INITIAL_ADVERTISE_PEER_URLS=http://0.0.0.0:2380
      - ETCD_INITIAL_CLUSTER_TOKEN=etcd-cluster
      - ETCD_INITIAL_CLUSTER=etcd-s1=http://0.0.0.0:2380
      - ETCD_INITIAL_CLUSTER_STATE=new
      - ETCD_LOGGER=zap
      - ETCD_LOG_LeveL=info
    volumes:
      - ./data/etcd/data:/var/etcd
      - "/etc/localtime:/etc/localtime:ro"
    ports:
      - 2379:2379
      - 2380:2380
    restart: always
  redis:
    image: redis:latest
    container_name: redis
    restart: always
    ports:
      - "6379:6379"
    volumes:
      - ./data/redis/data:/data
      - ./data/redis/conf/redis.conf:/etc/redis/redis.conf
    command: ["redis-server", "/etc/redis/redis.conf"]
  mysql:
    image: mysql:latest  # æŒ‡å®šMySQLç‰ˆæœ¬[citation:1][citation:2][citation:7]
    container_name: mysql-container  # è‡ªå®šä¹‰å®¹å™¨åç§°[citation:1]
    restart: unless-stopped  # è‡ªåŠ¨é‡å¯ç­–ç•¥[citation:2]
    environment:
      MYSQL_ROOT_PASSWORD: iam59!z$  # ğŸ” è®¾ç½®rootå¯†ç [citation:1][citation:2][citation:4]
      MYSQL_DATABASE: iam  # ğŸ—ƒï¸ å¯é€‰ï¼šåˆå§‹åŒ–æ•°æ®åº“[citation:1][citation:7]
      MYSQL_USER: admin  # ğŸ‘¤ å¯é€‰ï¼šåˆ›å»ºæ™®é€šç”¨æˆ·[citation:1][citation:7]
      MYSQL_PASSWORD: iam59!z$  # ğŸ” æ™®é€šç”¨æˆ·å¯†ç [citation:1][citation:7]
    ports:
      - "3306:3306"  # ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£æ˜ å°„[citation:1][citation:2][citation:4]
    volumes:
      - mysql_data:/var/lib/mysql  # ğŸ’¾ æ•°æ®æŒä¹…åŒ–ï¼šä½¿ç”¨å‘½åå·[citation:1][citation:2]
      - ./conf/my.cnf:/etc/mysql/conf.d/my.cnf:ro  # âš™ï¸ æŒ‚è½½è‡ªå®šä¹‰é…ç½®æ–‡ä»¶[citation:2][citation:7]
  mongo:
    image: mongodb/mongodb-community-server:latest
    container_name: mongo-dev
    restart: unless-stopped
    ports:
      - "27017:27017"
    environment:
      MONGO_INITDB_ROOT_USERNAME: root
      MONGO_INITDB_ROOT_PASSWORD: iam59!z$
      MONGO_INITDB_DATABASE: admin
    volumes:
      - mongo-data:/data/db
networks:
  default:
    name: etcd-tier
    driver: bridge
volumes:
  mysql_data:  # å£°æ˜å‘½åå·ï¼Œç”¨äºæ•°æ®æŒä¹…åŒ–[citation:1]
  mongo-data: